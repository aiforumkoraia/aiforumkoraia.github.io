<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>사진/영상</title> <!-- CSS 파일 연결 -->
    <meta property="og:description"
        content="대한민국 AI 산업의 균형 발전과 윤리적 규제, 글로벌 협력을 통해 지속 가능한 AI 정책 생태계를 조성하는 한국인공지능정책컨센서스입니다다.">
    <meta property="og:title" content="한국인공지능정책컨센서스" />
    <meta property="og:type" content="website" />
    <meta property="og:image"
        content="https://github.com/aiforumkoraia/aiforumkoraia.github.io/blob/main/img/og25_img.png?raw=true" />
    <link rel="icon" href="https://koraia.org/default/img/symbol.ico">
    <link rel="stylesheet" href="styles.css" />
    <link href="https://cdn.jsdelivr.net/gh/sun-typeface/SUIT@2/fonts/static/woff2/SUIT.css" rel="stylesheet">
    <style>
        /* Gallery grid styling */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }

        .gallery-item {
            cursor: pointer;
            overflow: hidden;
            border: 2px solid #f0f0f0;
            border-radius: 4px;
            transition: box-shadow 0.3s;
        }

        .gallery-item:hover {
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.3);
        }

        .gallery-img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.2s ease;
        }

        .gallery-item:hover .gallery-img {
            transform: scale(1.05);
        }

        .gallery-text {
            padding: 8px;
            text-align: center;
            background: #fff;
            font-size: 14px;
        }

        /* Modal styling */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            max-width: 90%;
            max-height: 90%;
            margin: auto;
            display: block;
            border-radius: 4px;
        }

        /* Video specific styling */
        .gallery-item video {
            width: 100%;
            height: auto;
            display: block;
        }

        /* Loading and error states */
        #loading, #error {
            color: #666;
            font-size: 16px;
        }
    </style>
</head>

<body>
    <header class="header">
        <div class="logo">
            <!-- 사이트 로고나 텍스트 -->
            <a href="/"><img src="public/images/logo_B.svg" alt=""></a>
        </div>
        <nav class="nav">
            <ul>
                <li>
                    <a href="javascript:void(0);">컨센서스 소개</a>
                    <ul class="submenu">
                        <li><a href="greeting" style="color: white;">인사말</a></li>
                        <li><a href="vision" style="color: white;">비전</a></li>
                        <li><a href="expected-outcomes" style="color: white;">기대효과</a></li>
                        <li><a href="overview" style="color: white;">개요</a></li>
                        <li><a href="organization" style="color: white;">조직구성</a></li>
                        <li></li>
                    </ul>
                </li>
                <li>
                    <a href="javascript:void(0);">컨센서스 활동</a>
                    <ul class="submenu">
                        <li><a href="annual-plan" style="color: white;">연간 활동 계획</a></li>
                        <li><a href="key-topics" style="color: white;">주요 주제</a></li>
                        <li><a href="key-deliverables" style="color: white;">주요 산출물</a></li>
                        <li></li>
                    </ul>
                </li>
                <li>
                    <a href="javascript:void(0);">컨센서스 소식</a>
                    <ul class="submenu">
                        
                        <li><a href="news" style="color: white;">관련기사</a></li>
                        <li><a href="events" style="color: white;">행사안내</a></li>
                        <li><a href="media" style="color: white;">사진/영상</a></li>
                        <li></li>
                    </ul>
                </li>
                <li><a href="membership-form">입회원서</a>
                    <ul class="submenu">
                        <li><a href="membership-form" style="color: white;">입회원서</a></li>
                        <li></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>
    <section>
        <div class="nav_banner">
            <p class="nav_banner_text">컨센서스 활동</p>
            <div class="breadcrumb">홈 <img style="margin: 0 20px;" src="public/images/arrow.svg" alt="arrow"> 컨센서스 소식
                <img style="margin: 0 20px;" src="public/images/arrow.svg" alt="arrow"> 사진/영상
            </div>
    </section>

    <section>
        <h1 class="head_title">사진/영상<br><img src="public/images/Line 18.svg" alt="Line 18" style="margin-top: 16px;">
        </h1>
        <div class="content">
            <div id="loading" style="text-align: center; padding: 40px;">
                <p>미디어를 불러오는 중...</p>
            </div>
            <div class="gallery" id="gallery" style="display: none;">
                <!-- 동적으로 생성될 갤러리 아이템들 -->
            </div>
            <div id="error" style="text-align: center; padding: 40px; display: none;">
                <p>미디어를 불러오는 중 오류가 발생했습니다.</p>
            </div>

            <!-- Modal for enlarged image -->
            <div id="modal" class="modal">
                <img class="modal-content" id="modal-img">
                <video class="modal-content" id="modal-video" controls style="display: none;">
                    <source src="" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>

            <script>
                // API 엔드포인트 설정
                const API_ENDPOINT = 'https://we.koraia.org:5001/api/media';

                // 미디어 데이터를 가져오는 함수
                async function fetchMediaData() {
                    try {
                        const response = await fetch(API_ENDPOINT);
                        const result = await response.json();

                        if (result.success && result.data) {
                            renderGallery(result.data);
                        } else {
                            showError();
                        }
                    } catch (error) {
                        console.error('미디어 데이터 로딩 실패:', error);
                        showError();
                    }
                }

                // 갤러리 렌더링 함수
                function renderGallery(mediaData) {
                    const gallery = document.getElementById('gallery');
                    const loading = document.getElementById('loading');

                    // 로딩 상태 숨기기
                    loading.style.display = 'none';

                    // 갤러리 비우기
                    gallery.innerHTML = '';

                    // 미디어 아이템들 생성
                    mediaData.forEach(item => {
                        const galleryItem = createGalleryItem(item);
                        gallery.appendChild(galleryItem);
                    });

                    // 갤러리 보여주기
                    gallery.style.display = 'grid';

                    // 클릭 이벤트 등록
                    setupModalEvents();
                }

                // 갤러리 아이템 생성 함수
                function createGalleryItem(item) {
                    const galleryItem = document.createElement('div');
                    galleryItem.className = 'gallery-item';

                    // 미디어 경로 처리
                    const mediaPath = item.media_path.startsWith('http') ? 
                        item.media_path : `https://we.koraia.org:5001/static/uploads/${item.media_path}`;

                    // 날짜 포맷팅
                    const uploadDate = new Date(item.upload_date);
                    const formattedDate = uploadDate.toLocaleDateString('ko-KR', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit'
                    }).replace(/\./g, '.').replace(/\. /g, '.');

                    if (item.media_type === 'video') {
                        galleryItem.innerHTML = `
                            <video class="gallery-img" preload="metadata" data-type="video" data-src="${mediaPath}">
                                <source src="${mediaPath}" type="video/mp4">
                            </video>
                            <div class="gallery-text">
                                <p>${item.title}</p>
                                <small>${formattedDate}</small>
                            </div>
                        `;
                    } else {
                        galleryItem.innerHTML = `
                            <img src="${mediaPath}" alt="${item.title}" class="gallery-img" data-type="image">
                            <div class="gallery-text">
                                <p>${item.title}</p>
                                <small>${formattedDate}</small>
                            </div>
                        `;
                    }

                    return galleryItem;
                }

                // 모달 이벤트 설정 함수
                function setupModalEvents() {
                    document.querySelectorAll('.gallery-item').forEach(item => {
                        item.addEventListener('click', () => {
                            const modal = document.getElementById('modal');
                            const modalImg = document.getElementById('modal-img');
                            const modalVideo = document.getElementById('modal-video');
                            const media = item.querySelector('.gallery-img');
                            const mediaType = media.getAttribute('data-type');

                            if (mediaType === 'video') {
                                modalImg.style.display = 'none';
                                modalVideo.style.display = 'block';
                                modalVideo.querySelector('source').src = media.getAttribute('data-src') || media.src;
                                modalVideo.load();
                            } else {
                                modalVideo.style.display = 'none';
                                modalImg.style.display = 'block';
                                modalImg.src = media.src;
                            }

                            modal.style.display = "flex";
                        });
                    });
                }

                // 에러 상태 보여주기
                function showError() {
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('error').style.display = 'block';
                }

                // 모달 닫기 이벤트
                document.getElementById('modal').addEventListener('click', (e) => {
                    if (e.target === e.currentTarget) {
                        const modal = document.getElementById('modal');
                        const modalVideo = document.getElementById('modal-video');
                        modal.style.display = "none";
                        modalVideo.pause(); // 비디오 일시정지
                    }
                });

                // 페이지 로드 시 미디어 데이터 가져오기
                document.addEventListener('DOMContentLoaded', fetchMediaData);


            </script>
        </div>

    </section>

    <footer>
        <div class="footer">
            <div class="footer_logo">
                <img src="public/images/logo_B.svg" alt="">
                <img src="public/images/to_top_btn.svg" alt="">

            </div>
            <div class="footer_text">
                <p>서울특별시 마포구 백범로 88 (대흥동) 경총회관 3층<br>
                    T. 02-713-4800・F. 02-6971-8901・E-mail. info@koraia.org</p>
            </div>

            <hr style="background: #011131; height: 0.3px;">
            <div class="footer_copylight">ⓒ 2025 AI Policy Forum, All Rights Reserved.</div>

    </footer>

    <script>
        document.querySelector('.footer_logo img:last-child').addEventListener('click', function () {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>

</html>